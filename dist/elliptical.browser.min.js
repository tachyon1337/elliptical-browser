!function(){void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var t=/function\s([^(]{1,})\(/,e=t.exec(this.toString());return e&&e.length>1?e[1].trim():""},set:function(t){}})}(),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define([],e):(t.elliptical.delegate=t.elliptical.delegate||{},t.elliptical.delegate.request=e(),t.returnExports=t.elliptical.delegate.request)}(this,function(){var t="ontouchend"in document?"touchstart tap click":"click",e="OnDocumentRequest",i="a:not([data-route])",n=$(document);return function(){function o(t){var i=$(t.currentTarget),o=i.attr("href");if(void 0!==o&&"#"!==o){var l=i.attr("data-propagation");l&&t.stopPropagation(),t.preventDefault();var r={method:"get",href:o};$.each(this.attributes,function(t,e){r[e.name.toCamelCase()]=e.value}),r.route=o,n.trigger(e,r)}}n.on(t,i,o)}}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-document")):"function"==typeof define&&define.amd?define(["elliptical-document"],e):(t.elliptical.delegate=t.elliptical.delegate||{},t.elliptical.delegate.submit=e($),t.returnExports=t.elliptical.delegate.submit)}(this,function(t){var e="submit",i='form[role="form"]',n="OnDocumentRequest",o="OnDocumentSubmit",l=t(document),r=!1;return function(){function a(e){e.stopPropagation(),e.preventDefault();var i=t(e.currentTarget),r=i.document(),a={route:this.action,body:r,method:t(this).attr("method"),element:this};l.trigger(n,a),l.trigger(o,a)}r||(r=!0,l.on(e,i,a))}}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-utils"),require("elliptical-class"),require("elliptical-location"),require("elliptical-soa"),require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-class","elliptical-location","elliptical-soa"],e):(t.elliptical.Request=e(t.elliptical.utils,t.elliptical.Class,t.elliptical,t.elliptical),t.returnExports=t.elliptical.Request)}(this,function(t,e,i,n){var o,l=i.Location,r=i.url,a=n.$Cookie,s=n.$Session;return o=e.extend({},{init:function(){this.params={},this.query={},this.body={},this.route={},this.files={},Object.defineProperties(this,{path:{get:function(){return l.path},configurable:!1},url:{get:function(){return l.href},configurable:!1},protocol:{get:function(){var t=l.protocol;return t=t.replace(":","")},configurable:!1},get:{get:function(t){return console.log('warning: "get" not implemented on the browser.'),!1},configurable:!1},accepted:{get:function(){return console.log('warning: "accepted" not implemented on the browser.'),!1},configurable:!1},accepts:{get:function(){return console.log('warning: "accepts" not implemented on the browser.'),!1},configurable:!1},is:{get:function(){return console.log('warning: "is" not implemented on the browser.'),!1},configurable:!1},xhr:{get:function(){return!0},configurable:!1},acceptsLanguage:{get:function(t){return console.log('warning: "acceptsLanguage" not implemented on the browser.'),!1},configurable:!1},acceptsCharset:{get:function(t){return console.log('warning: "acceptsLanguage" not implemented on the browser.'),!1},configurable:!1},acceptsCharsets:{get:function(){return!1},configurable:!1},acceptedLanguages:{get:function(){return!1},configurable:!1},originalUrl:{get:function(){return!1},configurable:!1},subdomains:{get:function(){return!1},configurable:!1},secure:{get:function(){return!1},configurable:!1},stale:{get:function(){return console.log('warning: "stale" not implemented on the browser.'),!1},configurable:!1},fresh:{get:function(){return console.log('warning: "fresh" not implemented on the browser.'),!1},configurable:!1},host:{get:function(){return window.location.hostname},configurable:!1},ip:{get:function(){},configurable:!1},ips:{get:function(){return console.log('warning: "ips" not implemented on the browser.'),!1},configurable:!1},signedCookies:{get:function(){return{}},configurable:!1}}),this.session={};for(var t=0;t<s.count;t++){var e=s.key(t);this.session[e]=s.get(e)}this.cookies={};for(var i=0;t<a.count;i++){var n=a.key(i);this.cookies[n]=a.get(n)}this._parsedUrl={},this._parsedUrl.pathname=l.path,this._parsedUrl.virtualize=function(t){var e=window.elliptical.$hashTag;return e&&(t=r.hashTagFormat(r)),t=r.pathComponent(t)},this.header=function(t){switch(t){case"Referer":return document.referrer}}}})}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-utils"),require("elliptical-class"),require("elliptical-location"),require("elliptical-soa")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-class","elliptical-location","elliptical-soa"],e):(t.elliptical.Response=e(t.elliptical.utils,t.elliptical.Class,t.elliptical,t.elliptical),t.returnExports=t.elliptical.Response)}(this,function(t,e,i,n){var o,l=i.Location,r=n.$Cookie,a=n.$Session;return o=e.extend({req:{}},{init:function(t){this.req=t,this.charset={},this.context={},this.transition={},this.locals={},this.status=function(t){},this.set=function(t,e){},this.get=function(t){},this.cookie=function(t,e,i){r.set(t,e,i)},this.clearCookie=function(t,e){r["delete"](t)},this.redirect=function(t,e){"undefined"==typeof e&&(e=t),e=decodeURIComponent(e),l.redirect(e)},this.session=function(t,e){a.set(t,e)},this.location=function(t){},this.send=function(t,e){},this.json=function(t,e){},this.jsonp=function(t,e){},this.type=function(t){},this.format=function(t){},this.attachment=function(t){},this.sendfile=function(t,e,i){},this.download=function(t,e,i){},this.links=function(t){}},render:function(t,e,i,n){var o=this.req,l=void 0,r=void 0,a=null,s=null,c=arguments.length;if(0===c&&(l={name:o.__name,view:o.__action},r={}),1===c&&("string"==typeof t?(l=t,r={}):t instanceof Function?(s=t,l={name:o.__name,view:o.__action},r={}):(l={name:o.__name,view:o.__action},r=t)),2==c&&("object"==typeof t?(r=t,"string"==typeof e||null===e?l=e:e instanceof Function?(s=e,l={name:o.__name,view:o.__action}):(a=e,l={name:o.__name,view:o.__action})):(r={},l=t,e instanceof Function?s=e:a=e)),3==c&&("object"==typeof t?(r=t,"string"==typeof e||null==e?(l=e,i instanceof Function?s=i:a=i):(l={name:o.__name,view:o.__action},a=e,s=i)):(r={},l=t,s=i,a=e)),4===c&&(l=e,r=t,a=i,s=n),c>4)throw"View render does not support more than 4 parameters";if(l){if("string"==typeof l){var u=l.split(".");2===u.length?l={name:u[0],view:u[1]}:1===u.length&&(l={name:o.__name,view:l})}}else l={name:o.__name,view:o.__action};!s instanceof Function&&(s=null),this.app.render(r,l,a,o,s)},setContext:function(e){var i=(t._,this.req);i.session=i.session||{},Object.assign(i.session,e)},contextHelpers:function(){var t=this.req,e=t.app;return new e.contextHelpers},formContext:function(){return{submitLabel:{css:"",cssDisplay:"",message:"&nbsp;"}}},dispatch:function(t,e,i){t?e(t):i.apply(this,arguments)}})}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("async"),require("elliptical-utils"),require("elliptical-soa"),require("elliptical-event"),require("elliptical-location"),require("elliptical-view"),require("elliptical-container"),require("./request"),require("./response"),require("./delegate.request"),require("./delegate.submit"),require("./function.patch")):"function"==typeof define&&define.amd?define(["async","elliptical-utils","elliptical-soa","elliptical-event","elliptical-location","elliptical-view","elliptical-container","./request","./response","elliptical-router","./delegate.request","./delegate.submit","./function.patch"],e):(t.elliptical.application=e(t.async,t.elliptical.utils,t.elliptical,t.elliptical.Event,t.elliptical,t.elliptical.View,t.elliptical.Container,t.elliptical.Request,t.elliptical.Response,t.elliptical.delegate.request,t.elliptical.delegate.submit),t.returnExports=t.elliptical.browser)}(this,function(t,e,i,n,o,l,r,a,s,c,u){var p=o.Router,f=o.Location,h=o.url,d=e.network,g="OnRouteDispatch",m="OnDocumentHistory",v="appRouter",_="production",w="development",b="data-environment",y="/",q="get",x="",R="html";return console.log(n),{init:function(){window.elliptical.$hashTag=!1,this.history=!1,this.async=t,this.factory=i.factory,this.contextSettings(),this.setEnvironment(),this.$setDefaultProviders(),this.cache={},this.stack=[],this.locations=[],this.Router=p,this.utils=e,this._defineProps(),this.isHistory=!1,this.container=r;var n=function(t){t.router=function(){t.next()},t.router.__name=v;var e=y,i=t.router;t.stack.push({route:e,handle:i})};n(this)},_defineProps:function(){this._debug=!1,this._virtualRoot=y,this._hashTag=!1,this.settings.siteTitle=x;var t=this;Object.defineProperties(this,{debug:{get:function(){return t._debug},set:function(e){p.debug=e,t._debug=e}},hashTag:{get:function(){return t._hashTag},set:function(e){p.hashTag=e,t._hashTag=e,window.elliptical.$hashTag=e}},virtualRoot:{get:function(){return t._virtualRoot},set:function(e){p.virtualRoot=e,t._virtualRoot=e,t.context.rootPath=e,window.elliptical.$virtualRoot=e}},siteRootTitle:{get:function(){return t.settings.siteTitle},set:function(e){t.settings.siteTitle=e}}})},$setDefaultProviders:function(){var t=i.Service;t.$paginationProvider=i.$Pagination,l.$provider=i.$Template},setEnvironment:function(t){function e(t){var e=$(R),i=e.attr(b);return"undefined"!=typeof i?(t.context.ENV=i.toLowerCase(),!0):!1}function i(t){var e=document.location.hostname;t.context.ENV=d.isLocalHost(e)?w:_}"undefined"!=typeof t?this.context.ENV=t.toLowerCase():e(this)||i(this)},getPort:function(){return void 0},getEnvironment:function(){return this.context.ENV},configure:function(t,e){"function"==typeof t?(e=t,e.call(this)):"string"==typeof t&&(t.toLowerCase()===_&&this.context.ENV===_?e.call(this):t.toLowerCase()===w&&this.context.ENV===w&&e.call(this))},config:function(){},get:function(t,e){p.get(t,e)},post:function(t,e){p.post(t,e)},put:function(t,e){p.put(t,e)},"delete":function(t,e){p["delete"](t,e)},contextHelpers:function(){this.form=function(){return{submitLabel:{cssDisplay:"hidden",message:"&nbsp;"}}}},contextSettings:function(){this.context={},this.context.virtualRoot=y,this.isServer=!1,this.isBrowser=!0,this.settings=this.settings||{},this.settings.config={cookie:{},session:{},providers:{}}},location:function(t,e){t.substring(0,1)!=y&&(t=y+t),"object"!=typeof e&&(e=[]);var i={path:t,exclude:e};this.locations.push(i)},parseRoute:function(t){return this.hashTag?h.hashTagFormat(t):t},onDispatchRequest:function(){var t=this;n.on(g,function(e){if(t.__cancelledRoute&&t.__route===e.route)t.__cancelledRoute=!1,t.__route=null;else{var i=e.route,n=e.handlers;t.dispatch(i,n)}})},use:function(t,e){var i=this.stack;if("string"!=typeof t&&(e=t,t="/"),"function"!=typeof e)return void(this.virtualRoot=t);if(e.__name&&e.__name===this.router.__name)for(var n=0;n<i.length;n++){var o=i[n].handle;if(o.__name&&o.__name===this.router.__name||0===o.length){i.splice(n,1);break}}try{if(0===e.length&&void 0===e.__name)return}catch(l){}i.push({route:t,handle:e})},dispatch:function(t,e){function i(t){return t.substring(0,1)!=y&&(t=y+t),t}function n(t,e,i){function n(r){var a=t[l++];"undefined"!=typeof a&&("undefined"!=typeof r?4===a.length?(e=o(e,a),i=o(i,a),a(r,e,i,n)):n(r):a.length<4?(e=o(e,a),i=o(i,a),a(e,i,n)):n())}var l=0;v.next=n,n()}function o(t,e){return t.__name=e.__name,t.__action=e.__action,t}t=i(t);for(var l=this.stack,r=[],c=0;c<l.length;c++){var u=l[c].handle;if(u.__name&&u.__name===this.router.__name)for(var f=0;f<e.length;f++)r.push(e[f]);else{var h=l[c].route,d=t.toLowerCase().indexOf(h);d>-1&&(t.length===h.length||t.substring(d+1,0)===y)&&r.push(l[c].handle)}}var g=new a;g.route=t;var m=new s(g),v=this;g.app=m.app=v,g.res=m,m.req=g,this.history&&(m.redirect=function(t){p.location(t,q,null)}),n(r,g,m)},server:function(t){},browser:function(t){t.call(this)},defaultMiddleware:function(t,e){},bootstrap:function(t,e,i){},listen:function(t,e){var i=this,n=null,o=arguments.length;0===o&&u(),1===o&&("function"==typeof t?(n=t,u()):this._start(t)),2===o&&(n=e,this._start(t)),n&&$(function(){setTimeout(function(){n.call(i)},CALLBACK_EXECUTION_DELAY)})},start:function(){this._start(!0)},_start:function(t){if(!t)return void u();var e=this,i=this.getEnvironment();this.isHistory=!0,u(),c(),this.onDispatchRequest(),this._setLocationHistoryService(),i===_&&(p.debug=!1),p.start(),e.history=function(t){document.addEventListener(m,function(i){var n=i.detail;t.call(e,n,e.container)})}},_setLocationHistoryService:function(){this.history=!0,f.redirect=function(t){p.location(t,q,null)},f.reload=function(){var t=f.href;p.location(t,q)}},onBeforeRender:function(t){"function"==typeof t&&(this.viewCallback=t)},render:function(t,e,i,n,o){function r(t){var n=l.clientContextRootNamespace;l.pushContextToClient?a(n,t):a(n,"");var r=$(p);d.render(e,t,function(t,e){if(f){var n=$.parseHTML(e,document,!0);r.append(n),o&&o instanceof Function&&o(null,e)}else u&&void 0!==u?d.transition(p,e,i,o):(r.html(e),o&&o instanceof Function&&o.call(this))})}function a(t,e){window[t]&&window[t].elliptical&&window[t].elliptical.context?window[t].elliptical.context=e:window[t]?(window[t].elliptical={},window[t].elliptical.context=e):(window[t]={},window[t].elliptical={},window[t].elliptical.context=e)}function s(t,e){return t.PageTitle?e.settings.siteTitle&&(t.PageTitle=e.settings.siteTitle+"-"+t.PageTitle):e.settings.siteTitle&&(t.PageTitle=e.settings.siteTitle),t}t=t||{};var c=this,u=null,p=null,f=!1,h=null;i&&void 0!==i&&(u=i.transition,p=i.selector,f=i.append,h=i.delay);var d=new l;try{Object.assign(t,c.context),n.session&&Object.assign(t,n.session)}catch(g){}t=s(t,c),t.rootPath&&t.rootPath===y&&(t.rootPath=""),p&&void 0!==p||(p=l.selector);var m=h&&void 0!==h?parseInt(h):0;"undefined"!=typeof c.viewCallback?c.viewCallback(n,this,t,function(t){setTimeout(function(){r(t)},m)}):setTimeout(function(){r(t)},m)}}}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-utils"),require("elliptical-soa"),require("elliptical-location"),require("elliptical-event"),require("elliptical-middleware"),require("elliptical-http"),require("elliptical-crypto"),require("./application"),require("./response"),require("./request")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-soa","elliptical-location","elliptical-event","elliptical-middleware","elliptical-http","elliptical-crypto","./application","./response","./request"],e):(t.elliptical.browser=e(t.elliptical.utils,t.elliptical,t.elliptical.Location,t.elliptical.Event,t.elliptical.middleware,t.elliptical.http,t.elliptical.crypto,t.elliptical.application,t.elliptical.Response,t.elliptical.Request),t.returnExports=t.elliptical.browser)}(this,function(t,e,i,n,o,l,r,a,s,c){function u(){var t=function(){};return Object.assign(t,a),t.init(),t}e.Try=function(t,e){try{e.apply(this,arguments)}catch(i){t(i)}};var p=u;return p.Event=n,p.application=a,p.Response=s,p.Request=c,p.http=l,p.crypto=r,p.Location=location.Location,Object.assign(e,o),Object.assign(p,e),window.elliptical=p,window.elliptical.$virtualRoot="/",p});